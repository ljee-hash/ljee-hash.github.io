---
layout:     post
title:      "Elasticsearch介绍"
subtitle:   "搜索引擎"
date:       2021-01-23 10:15:06
author:     "CaoZhiLong"
tags:
    - 搜素引擎
    - Elasticsearch
---


# Elasticsearch介绍

- Elasticsearch如何胜任搜索引擎的工作
- 典型的使用场景
- 如何使用Elasticsearch

**相关概念**

[搜索引擎介绍](https://ljee-hash.github.io/2022/02/23/search_engine_practice_introduction/)


## Elasticsearch如何胜任搜索引擎的工作


### ES存在的意义

1、可以在关系型数据库上搭建搜索引擎，建立索引并加速SQL查询 的执行

2、也可以从NoSQL数据存储上建立索引，然后支持搜索功能

3、可以完好的存储数据，可以将其直接作为带搜索功能的NoSQL数据存储使用

4、Es里的数据是通过文档形式表示，可以与MongoDB这种面向文档的存储搭配

### ES的优势

1、应用代码不是必须用Java书写才可以和Elasticsearch兼容

2、可以通过Json格式的Http请求来进行索引、搜索和管理Elaticsearch集群

3、正如名字中的"elastic"所示，一切都是灵活、有弹性的

4、Lucene允许通过自己的Java应用程序实现搜索功能，ES对其进行了扩展，使存车处、索引、搜索可以更快、更容易

5、ES是构建在Apache Lucene之上的开源分布式搜索引擎

### 解决搜索的问题

1. 支持健壮搜索功能所需的特性

-    引擎可以提供快速的查询
-    确保搜索结果都是相关的

2. 当用户不清楚具体要用哪些词来查找时，搜索还能提供辅助的功能，用于实现更佳的用户体验

 - 超越精确匹配
 
    1、处理错误的拼写
    2、支持变体
    3、使用统计信息
    4、给予自动提示
            
-  具体需要的辅助功能

    1、识别错误的输入
    2、给出自动提示
    3、对结果进行分类

3. 实现基于关键词的搜索，返回所有包含这个关键词的帖子



## 典型的使用场景

可以确定，在Es中存储和索引数据，是提供快速和相关查询结果的比较好的方案。但是归根结底，ES只是个搜索引擎，我们永远不不可能单独使用它。就像其他数据存储，需要通过某种方式将数据输入到其中，也可能需要提供用户搜索数据的交互界面。

为了理解ES是如何融入更大系统中的，来考虑以下几种典型的应用场景。

1、将Es作为网站主要的后端系统
2、将Es集成到现有系统
3、将Es作为现有解决方案中的后端部分一同使用

### 将Es作为网站主要的后端系统

1、ES像其他的NoSQL数据存储，并不支持事务

如果一台服务器宕机，会发生什么？

1. Es可以通过将数据复制到不同的服务器来达到容错的效果
2. 很多其他特性，使Es成为一个有吸引力的NoSQL数据存储
3. 需要权衡下，在整体设计中引入另一个数据源而增加的额外复杂度


### 将Es集成到现有系统

1、就Es而言，也许不会提供你所需的一切数据存储功能，

2、某些场景下需要在另一个数据存储的额基础上使用Es
    如，Es还不支持事务和复杂关系的特性，至少在版本1中如此
    如果需要支持事务和复杂关系，请考虑同时使用Es和另一个不同的数据存储
3、如已经有一个复杂的系统在运作，但是想加入搜索功能
    只是为了使用Es而重新设计整个系统(尽管长期而言会这么做)，那未免风险太高了
    更安全的方法是在系统中加入Es，让它和现有模块协同工作
4、无论哪种方式，如果有两个数据存储，必须想方设法保持它们的同步
    根据主要存储是什么类型，以及数据是如何布局规划的，可以部署一个Es插件，保持两者同步

### 将Es作为现有解决方案中的后端部分一同使用

1、在某些用例中，无需编写任何代码，就可让Es帮搞定任务，很多现成的工具可以和Es协同工作，无需从头开始
    如，想部署大规模的日志框架，用于存储、搜索、和分析海量的事件。如图1-4所示
2、事实上，Es在Apache2许可下是开源的。Es是Java编写的，不仅仅Java API可以和它工作。它也暴漏了REST API，任何应用程序，无论是何种编程语言可直接访问这种接口
3、此外，REST请求和结果返回通常是JSON(JavaScript Object Notation)格式的。通常一个REST请求都有其自己的JSON有效荷载，返回结果同样是一个JSON文档

## 如何使用Elasticsearch

1、ES的主要特性

2、扩展Luccene的功能

3、ES高级深入功能

### ES的主要特性


### 扩展Luccene的功能


### ES高级深入功能


## 小结

1、 可以将Es当作一个NoSQL的数据存储，包括了实时性搜索和分析能力。它是面向文档的，默认情况下就是可扩展的。

2、 Es自动将数据划分为分片，在集群中的服务器上做负载均衡。使得动态添加和移除服务器变得很容易。分片也可以复制，使得集群具有容错性。

3、对于数据的索引和搜索，以及集群配置的管理，都可使用HTTP API的JSON，并获得JSON应答

4、上手时，先下载压缩包，需要时解压它，并运行Es启动脚本

5、Es提供的特性远远超过全文搜索。如，可以调优搜索相关性并提供搜索建议 

6、Es常见的用法是索引大规模的数据，这样可以运行全文搜索和实时数据统计

7、Es是构建在Apache Lucene之上的开源分布式搜索引擎







